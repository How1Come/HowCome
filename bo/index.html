<!DOCTYPE html>
<html>

<head>
    <title>Breakout Game</title>
    <script src="https://cdn.jsdelivr.net/pyjslib/1.1.1/pyjslib.min.js"></script>
</head>

<body>
    <canvas id="gameCanvas" width="800" height="600"></canvas>

    <script type="text/javascript">
        var pgjs = PygameJS();

        function main() {
            pgjs.init();
            var screen = pgjs.display.set_mode([800, 600]);
            pgjs.display.set_caption("Breakout Game");
            var clock = pgjs.time.Clock();

            var WHITE = [255, 255, 255];
            var BLUE = [0, 0, 255];
            var RED = [255, 0, 0];

            var paddle_width = 100;
            var paddle_height = 20;
            var paddle_x = (800 - paddle_width) / 2;
            var paddle_y = 550;
            var paddle_speed = 5;

            var ball_radius = 10;
            var ball_x = 400;
            var ball_y = 300;
            var ball_dx = 3;
            var ball_dy = -3;

            var bricks = [];
            for (var row = 0; row < 5; row++) {
                for (var col = 0; col < 10; col++) {
                    var brick_x = col * 80;
                    var brick_y = row * 30;
                    bricks.push(new pgjs.Rect(brick_x, brick_y, 75, 20));
                }
            }

            var running = true;
            while (running) {
                for (var event in pgjs.event.get()) {
                    if (event.type === pgjs.QUIT) {
                        running = false;
                    }
                }

                var keys = pgjs.key.get_pressed();
                if (keys[pgjs.K_LEFT] && paddle_x > 0) {
                    paddle_x -= paddle_speed;
                }
                if (keys[pgjs.K_RIGHT] && paddle_x < 800 - paddle_width) {
                    paddle_x += paddle_speed;
                }

                ball_x += ball_dx;
                ball_y += ball_dy;

                if (ball_x < 0 || ball_x > 800 - ball_radius) {
                    ball_dx *= -1;
                }
                if (ball_y < 0) {
                    ball_dy *= -1;
                }

                var paddle_rect = new pgjs.Rect(paddle_x, paddle_y, paddle_width, paddle_height);
                var ball_rect = new pgjs.Rect(ball_x - ball_radius, ball_y - ball_radius, ball_radius * 2, ball_radius * 2);
                if (ball_rect.colliderect(paddle_rect)) {
                    ball_dy *= -1;
                }

                for (var i = 0; i < bricks.length; i++) {
                    var brick = bricks[i];
                    if (ball_rect.colliderect(brick)) {
                        bricks.splice(i, 1);
                        ball_dy *= -1;
                        break;
                    }
                }

                if (ball_y > 600) {
                    running = false;
                }

                screen.fill(WHITE);
                pgjs.draw.rect(screen, BLUE, paddle_rect);
                pgjs.draw.circle(screen, RED, [ball_x, ball_y], ball_radius);
                for (var i = 0; i < bricks.length; i++) {
                    pgjs.draw.rect(screen, BLUE, bricks[i]);
                }

                pgjs.display.flip();
                clock.tick(60);
            }

            pgjs.quit();
        }

        main();
    </script>
</body>

</html>